<odoo>
    <data>

        <template id="assets_frontend" inherit_id="web.assets_frontend">
            <xpath expr="." position="inside">
                <link rel="stylesheet" href="/service_mobile/static/src/css/site.css"/>
            </xpath>
        </template>
        <!--Show list of orders-->
        <template id="index">
            <t t-call="website.layout">
                <div class="table-wrapper">
                    <div class="table-title">
                        <div class="row">
                            <div class="col-sm-6">
                                <a class="d-inline mr-1" t-att-href="'/service/all/order'" style="color:white;">
                                    <h2 class="d-inline mr-1">
                                        <i class="fa fa-home"></i>
                                        Orders
                                    </h2>
                                </a>
                                <a t-att-href="'/service/order/create'" class="ml-1">
                                    <h2 class="d-inline">Create New</h2>
                                </a>
                            </div>
                        </div>
                    </div>
                    <table class="table table-striped table-hover">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Order ID</th>
                                <th>Customer</th>
                                <th>Order date</th>
                                <th>Status</th>
                                <th>Total amount $</th>
                                <th>Action</th>
                                <th>Prio</th>
                                <th>Add Task Time</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Message after order deleted successful-->
                            <tr t-if="order_state == 'cancel'">
                                <span class="row alert alert-success">
                                    Order deleted successful!
                                </span>
                            </tr>

                            <tr t-foreach="order_ids" t-as="order" t-if="order.state != 'cancel'">
                                <td>
                                    <t t-esc="order_index+1"/>
                                </td>
                                <td>
                                    <a t-att-href="'/service/%s/order' % order.id">
                                        <t t-esc="order.display_name"/>
                                    </a>
                                </td>
                                <td>
                                    <t t-esc="order.partner_id.name"/>
                                </td>
                                <td>
                                    <t t-esc="order.date_order"/>
                                </td>
                                <td>
                                    <t t-if="order.state == 'sale'">
                                        <span class="badge badge-success">
                                            <t t-esc="order.state"/>
                                        </span>
                                    </t>
                                    <t t-elif="order.state == 'sent'">
                                        <span class="badge badge-info">
                                            <t t-esc="order.state"/>
                                        </span>
                                    </t>
                                    <t t-elif="order.state == 'cancel'">
                                        <span class="badge badge-danger">
                                            <t t-esc="order.state"/>
                                        </span>
                                    </t>
                                    <t t-elif="order.state == 'done'">
                                        <span class="badge badge-secondary">
                                            <t t-esc="order.state"/>
                                        </span>
                                    </t>
                                    <t t-else="">
                                        <span class="badge badge-warning">
                                            <t t-esc="order.state"/>
                                        </span>
                                    </t>
                                </td>
                                <td>
                                    <t t-esc="order.amount_total"/>
                                </td>
                                <td>
                                    <a t-att-href="'/service/%s/order/delete' % order.id">
                                        <i class="fa fa-trash"/>
                                    </a>
                                    |
                                    <a t-att-href="'/service/%s/order/send' % order.id">
                                        <i class="fa fa-paper-plane"/>
                                    </a>
                                </td>
                                <td>
                                    <span>
                                        <t t-esc="'True' if order.prio else 'False'"/>
                                    </span>
                                </td>
                                <td>
                                    <a t-att-href="'/service/%s/task' % order.id">
                                        Add Task Time
                                    </a>
                                </td>
                            </tr>

                        </tbody>
                    </table>
                </div>
            </t>
        </template>

        <!-- Show order detail and update order-->
        <template id="view_order">
            <t t-call="website.layout">
                <form id="info_form" t-att-action="'/service/%s/order' % order.id" method="post"
                      class="form-horizontal mt32 mx-3" enctype="multipart/form-data" style="with:80%;margin:auto">
                    <input type="hidden" name="id" t-att-value="order.id"/>
                    <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>

                    <div class="form-group">
                        <a class="d-inline mr-1" t-att-href="'/service/all/order'">
                                    <h2 class="d-inline mr-1">
                                        <i class="fa fa-home"></i>
                                        Orders
                                    </h2>
                                </a>
                    </div>
                    <div class="form-group">
                        <label class="col-md-3 col-sm-4 control-label" for="orderID">Order Id</label>
                        <div class="col-md-7 col-sm-8">
                            <p class="form-control-static" name="orderID">
                                <t t-esc="order.name"/>
                            </p>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-3 col-sm-4 control-label" for="foobar1">Customer</label>
                        <div class="col-md-7 col-sm-8">
                            <p class="form-control-static" name="foobar1">
                                <t t-esc="order.partner_id.name"/>
                            </p>
                        </div>
                    </div>
                    <div t-att-class="'form-group %s' %validation.get('note', '')">

                        <div class="col-md-7 col-sm-8">
                            <label class="col-md-3 col-sm-4 control-label" for="note">Note</label>
                            <input type="text" class="form-control" name="note"
                                   t-att-value="order.note if order.note else order.name" placeholder="Notes..."/>
                            <small t-esc="help.get('note', '')"/>

                            <p class="font-weight-bold mt-3">Priority</p>
                            <label class="switch switch-left-right mt--3">
                                <input class="switch-input" type="checkbox" name="prio" t-att-checked="order.prio"/>
                                <span class="switch-label" data-on="On" data-off="Off"/>
                                <span class="switch-handle"/>
                            </label>

                        </div>
                    </div>
                    <div class="form-group col-md-7 col-sm-8">
                        <table class="table table-striped table-hover">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>Product</th>
                                    <th>Måttenhet</th>
                                    <th>Beställa antal</th>
                                    <th>Unit Price</th>
                                    <th>Price exkl. tax</th>
                                    <th>Tax</th>
                                    <th>Totacl Price</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr t-foreach="sale_order_line_ids" t-as="orderline">
                                    <td>
                                        <t t-esc="orderline_index+1"/>
                                    </td>
                                    <td>
                                        <t t-esc="orderline.product_id.name"/>
                                    </td>
                                    <td>
                                        <t t-esc="orderline.product_uom.name"/>
                                    </td>
                                    <td>
                                        <div t-att-class="'form-group %s' %validation.get('order_line', '')">
                                        <input type="text" class="form-control" name="qty"
                                               t-att-value="orderline.product_uom_qty"
                                               placeholder="0"/>
                                        </div>
                                    </td>
                                    <td>
                                        <t t-esc="orderline.price_unit"/>
                                    </td>
                                    <td>
                                        <t t-esc="orderline.price_subtotal"/>
                                    </td>
                                    <td>
                                        <t t-esc="orderline.price_tax"/>
                                    </td>
                                    <td>
                                        <t t-esc="orderline.price_total"/>
                                    </td>
                                </tr>

                            </tbody>
                        </table>
                    </div>


                    <div class="col-md-12">
                        <div class="mb16">
                            <div class="">
                                <a t-att-href="'/service/%s/task' % order.id"  class="btn btn-primary btn-sm">Task</a>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-12">
                        <div class="pull-right mb16">
                            <div class="">
                                <button id="submit_btn" class="btn btn-primary btn-lg">Save</button>
                            </div>
                        </div>
                    </div>
                </form>
            </t>
        </template>

        <!-- Show order detail and update project-task-arbetstid-->
        <template id="view_task">
            <t t-call="website.layout">
                <form id="info_form" t-att-action="'/service/%s/task' % order.id" method="post"
                      class="form-horizontal mt32 mx-3" enctype="multipart/form-data" style="with:80%;margin:auto">
                    <input type="hidden" name="id" t-att-value="order.id"/>
                    <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>

                    <div class="form-group">
                        <a class="d-inline mr-1" t-att-href="'/service/all/order'">
                                    <h2 class="d-inline mr-1">
                                        <i class="fa fa-home"></i>
                                        Orders
                                    </h2>
                                </a>
                    </div>
                    <div class="form-group">
                        <label class="col-md-3 col-sm-4 control-label" for="orderID">Order Id</label>
                        <div class="col-md-7 col-sm-8">
                            <p class="form-control-static" name="orderID">
                                <t t-esc="order.name"/>
                            </p>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-3 col-sm-4 control-label" for="taskID">Task</label>
                        <div class="col-md-7 col-sm-8">
                            <p class="form-control-static" name="taskID">
                                <t t-esc="order.tasks_ids[0].name"/>
                            </p>
                        </div>
                    </div>

                     <label class="col-md-3 col-sm-4 control-label">Time Rapport</label>
                    <div class="form-group col-md-7 col-sm-8">
                        <table class="table table-striped table-hover">
                            <thead>
                                <tr>
                                    <th>Order Id</th>
                                    <th>Date</th>
                                    <th>Employee</th>
                                    <th>Work Description</th>
                                    <th>Duration(Hours)</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr t-foreach="task_objs" t-as="task_obj">
                                    <td><t t-esc="task_obj.task_id.sale_order_id.name"/></td>
                                    <td><t t-esc="task_obj.date"/></td>
                                    <td><t t-esc="task_obj.employee_id.name"/></td>
                                    <td><t t-esc="task_obj.name"/></td>
                                    <td><t t-esc="task_obj.unit_amount"/></td>
                                </tr>
                                <tr>
                                    <td>Order Id</td>
                                    <td><t t-esc="date"/></td>
                                    <td><t t-esc="employee"/></td>

                                        <div t-att-class="'form-group %s' %validation.get('task_time', '')">
                                    <td>
                                        <input type="text" class="form-control" name="name" placeholder="Description..."/>

                                    </td>
                                    <td>
                                        <input type="text" class="form-control" name="hours" placeholder="0"/>

                                    </td>
                                        </div>
                                </tr>

                            </tbody>
                        </table>
                    </div>


                    <div class="col-md-12">
                        <div class="pull-right mb16">
                            <div class="">
                                <button id="submit_btn" class="btn btn-primary btn-lg">Save</button>
                            </div>
                        </div>
                    </div>
                </form>
            </t>
        </template>

        <!-- Create a new order-->
        <template id="create_order">
            <t t-call="website.layout">
                <form id="create_order_form" t-att-action="'/service/order/create'" method="post"
                      class="form-horizontal mt32" enctype="multipart/form-data">
                    <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                    <div class="form-group">
                        <label class="col-md-3 col-sm-4 control-label" for="foobar1">Create new sales order</label>
                    </div>

                    <div t-att-class="'form-group %s' %validation.get('sales_order', '')">
                        <label class="col-md-3 col-sm-4 control-label" for="partner_id">Customer:</label>
                        <div class="col-md-7 col-sm-8">
                            <select class="form-control" name="partner_id">
                                <t t-foreach="partner_ids" t-as="p">
                                    <option t-esc="p.display_name" t-att-value="p.id"/>
                                </t>
                            </select>
                        </div>
                        <label class="col-md-3 col-sm-4 control-label" for="sale_order_template_id">Sales order
                            template:
                        </label>
                        <div class="col-md-7 col-sm-8">
                            <select class="form-control" name="sale_order_template_id">
                                <t t-foreach="sale_order_template_ids" t-as="t">
                                    <option t-esc="t.name" t-att-value="t.id"/>
                                </t>
                            </select>
                        </div>
                    </div>

                    <div class="col-md-12">
                        <div class="pull-right mb16">
                            <div class="">
                                <button id="submit_btn" class="btn btn-primary btn-lg">Create</button>
                            </div>
                        </div>
                    </div>
                </form>
            </t>
        </template>

        <!--VG UPPGIFT: Show list of order to users that unlogged in-->
        <template id="index_public">
            <ul>
                <li t-foreach="order_ids" t-as="order">
                    <t t-esc="order.id"/>
                    <t t-esc="' : ' + order.display_name"/>
                    <t t-esc="' : ' + order.partner_id.name"/>
                    <t t-esc="' : '"/>
                    <t t-esc="order.amount_total"/>
                    <t t-esc="' : ' + order.state"/>
                </li>
            </ul>
        </template>

        <!-- F4 Show list of projects-->
        <template id="index_project">
            <t t-call="website.layout">
                <div class="table-wrapper">
                    <div class="table-title">
                        <div class="row">
                            <div class="col-sm-6">
                                <a class="d-inline mr-1" t-att-href="'/service/all/project'" style="color:white;">
                                    <h2 class="d-inline mr-1">
                                        <i class="fa fa-home"></i>
                                        Projects
                                    </h2>
                                </a>
                                <a t-att-href="'/service/project/create'" class="ml-1">
                                    <h2 class="d-inline">Create New Project</h2>
                                </a>
                            </div>
                        </div>
                    </div>
                    <table class="table table-striped table-hover">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Project ID</th>
                                <th>Project Name</th>
                                <th>Project Leader/Saler</th>
                                <th>Customer</th>
                                <th>Order</th>
                                <th>Tasks</th>
                                <th>Start Date</th>
                                <th>Operation</th>
                            </tr>
                        </thead>
                        <tbody>

                            <tr t-foreach="project_ids" t-as="project">
                                <td>
                                    <t t-esc="project_index+1"/>
                                </td>
                                <td>
                                    <t t-esc="project.id"/>
                                </td>
                                <td>
                                    <a t-att-href="'/service/%s/project' % project.id">
                                        <t t-esc="project.display_name"/>
                                    </a>
                                </td>
                                <td>
                                    <t t-esc="project.partner_id.name"/>
                                </td>
                                <td>
                                    <t t-esc="project.user_id.name"/>
                                </td>
                                <td>
                                    <t t-esc="project.sale_order_id.name"/>
                                </td>
                                <td>
                                    <span class="badge badge-warning">
                                        <t t-esc="project.task_count"/>
                                    </span>
                                </td>
                                <td>
                                    <t t-esc="project.date_start"/>
                                </td>

                                <td>
                                    <a t-att-href="'/service/%s/project/delete' % project.id">
                                        <i class="fa fa-trash"/>
                                    </a>
                                </td>
                            </tr>

                        </tbody>
                    </table>
                </div>
            </t>
        </template>

        <!-- update project-->
        <template id="view_project">
            <t t-call="website.layout">
                <form id="info_form" t-att-action="'/service/%s/project' % project.id" method="post"
                      class="form-horizontal mt32" enctype="multipart/form-data">
                    <input type="hidden" name="id" t-att-value="project.id"/>
                    <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>

                    <div t-att-class="'form-group %s' %validation.get('project_project', '')">
                        <div class="form-group">
                            <label class="col-md-3 col-sm-4 control-label" for="project_name">Project</label>
                            <div class="col-md-7 col-sm-8">
                                <p class="form-control-static" name="project_name">
                                    <t t-esc="project.display_name"/>
                                </p>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="col-md-3 col-sm-4 control-label" for="partner_id">Customer:
                                <span>
                                    <t t-esc="project.partner_id.name"/>
                                </span>
                            </label>

                            <div class="col-md-7 col-sm-8">
                                <select class="form-control" name="partner_id">
                                    <t t-foreach="partner_ids" t-as="partner">
                                        <option t-esc="partner.name" t-att-value="partner.id"
                                        />
                                    </t>
                                </select>
                            </div>
                        </div>

                        <div class="col-md-7 col-sm-8">
                            <label class="control-label" for="user_id">Project leader/Saler:
                                <span>
                                    <t t-esc="project.user_id.name"/>
                                </span>
                            </label>
                            <div class="">
                                <select class="form-control" name="user_id">
                                    <t t-foreach="user_ids" t-as="saler">
                                        <option t-esc="saler.name" t-att-value="saler.id"/>
                                    </t>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-12">
                        <div class="pull-right mb16">
                            <div class="">
                                <button id="submit_btn" class="btn btn-primary btn-lg">Save</button>
                            </div>
                        </div>
                    </div>
                </form>
            </t>
        </template>

        <!-- Create a new project-->
        <template id="create_project">
            <t t-call="website.layout">
                <form id="create_project_form" t-att-action="'/service/project/create'" method="post"
                      class="form-horizontal mt32" enctype="multipart/form-data">
                    <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                    <div class="form-group">
                        <label class="col-md-3 col-sm-4 control-label">Create new project</label>
                    </div>

                    <div t-att-class="'form-group %s' %validation.get('project_project', '')">

                        <div class="col-md-7 col-sm-8">
                            <label class="control-label" for="project_name">Project Name</label>
                            <input type="text" class="form-control" name="project_name"
                                   placeholder="Project name..."/>
                            <small t-esc="help.get('project_name', '')"/>
                        </div>

                        <div class="col-md-7 col-sm-8">
                            <p class="font-weight-bold mt-3 control-label">Allow Timesheets</p>
                            <label class="switch switch-left-right mt--3">
                                <input class="switch-input" type="checkbox" name="allow_timesheets"/>
                                <span class="switch-label" data-on="On" data-off="Off"/>
                                <span class="switch-handle"/>
                            </label>
                        </div>

                        <div class="col-md-7 col-sm-8">
                            <label class="control-label" for="partner_id">Customer:</label>
                            <div class="">
                                <select class="form-control" name="partner_id">
                                    <t t-foreach="partner_ids" t-as="p">
                                        <option t-esc="p.display_name" t-att-value="p.id"/>
                                    </t>
                                </select>
                            </div>
                        </div>
                    </div>


                    <div class="col-md-12">
                        <div class="pull-right mb16">
                            <div class="">
                                <button id="submit_btn" class="btn btn-primary btn-lg">Create</button>
                            </div>
                        </div>
                    </div>
                </form>
            </t>
        </template>


    </data>
</odoo>
