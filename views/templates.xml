<odoo>
    <data>

        <template id="assets_frontend" inherit_id="web.assets_frontend">
            <xpath expr="." position="inside">
<!--                <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"/>-->
                <link rel="stylesheet" href="/service_mobile/static/src/css/site.css"/>
                <link rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.15.5/dist/bootstrap-table.min.css"/>
<!--                <link rel="stylesheet" href="https://cdn.datatables.net/1.10.20/css/dataTables.bootstrap.min.css"/>-->

<!--                <link rel="stylesheet" href="https://code.jquery.com/jquery-3.3.1.js"/>-->
<!--                <link rel="stylesheet" href="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js"/>-->

<!--                <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"/>-->
<!--<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"/>-->
<!--<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"/>-->

                <script type="text/javascript" src="https://unpkg.com/bootstrap-table@1.15.5/dist/bootstrap-table.min.js" />
<!--                <script type="text/javascript" src="https://cdn.datatables.net/1.10.20/js/dataTables.bootstrap.min.js" />-->
                <script type="text/javascript" src="/service_mobile/static/src/js/sort_table.js"/>
                <script type="text/javascript" src="/service_mobile/static/src/js/service_mobile.js"/>

            </xpath>
        </template>

        <!--Show list of orders-->
        <template id="index">
            <t t-call="website.layout">

                <div class="service_mobile table-wrapper">
                    <div class="table-title">
                        <div class="row">
                            <div class="col-sm-12">
                                <a class="d-inline mr-1" t-att-href="'/service/all/order'" style="color:white;">
                                    <h2 class="d-inline mr-1">
                                        <i class="fa fa-home"></i>
                                        Orders
                                    </h2>
                                </a>
                                <a t-att-href="'/service/order/create'" class="ml-1">
                                    <h2 class="d-inline">Create New</h2>
                                </a>
                                |
                                <a t-att-href="'/service/all/result'" class="ml-1" style="font:16px">
                                    <h2 class="d-inline">Order Result</h2>
                                </a>
                                <a t-att-href="'/service/all/project'" class="pull-right mt-1" style="color:white;">
                                    <p class="d-inline">Projects</p>
                                </a>
                            </div>
                        </div>
                    </div>

                    <table class="table table-striped table-hover" id="table"
                           data-toggle="table" data-pagination="true" data-search="true" data-filter-control="true">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th id="order_id" data-sortable="true" data-field="order_id">Order ID</th>
                                <th id="customer" data-sortable="true" data-field="customer">Customer</th>
                                <th id="date" data-sortable="true" data-field="date">Order Date</th>
                                <th id="status" data-sortable="true" data-field="status">Status</th>
                                <th id="amount_total" data-sortable="true" data-field="amount_total">Total amount $</th>
                                <th id="action" data-field="action">Action</th>
<!--                                <th id="prio" data-sortable="true" data-field="prio">Prio</th>-->
                                <th id="note" data-sortable="true" data-field="note">Note</th>
                            </tr>
                        </thead>
                        <tbody>
                            <t t-foreach="order_ids" t-as="order">
                                <tr>
                                    <td>
                                        <t t-esc="order_index+1"/>
                                    </td>
                                    <td>
                                        <a t-att-href="'/service/%s/order' % order.id">
                                            <t t-esc="order.display_name"/>
                                        </a>
                                    </td>
                                    <td>
                                        <t t-esc="order.partner_id.name"/>
                                    </td>
                                    <td>
                                        <t t-esc="order.date_order"/>
                                    </td>
                                    <td>
                                        <div t-att-id="'prio_status_%s' % order.id">
                                            <t t-if="order.prio">
                                                <span class="badge badge-danger">Prio</span>
                                            </t>
                                            <t t-if="not order.prio">
                                                <span class="badge badge-info">Normal/Non-Prio</span>
                                            </t>
                                        </div>
                                        <t t-if="order.state == 'sale'">
                                            <span class="badge badge-success">
                                                <t t-esc="order.state"/>
                                            </span>
                                        </t>
                                        <t t-elif="order.state == 'sent'">
                                            <span class="badge badge-info">
                                                <t t-esc="order.state"/>
                                            </span>
                                        </t>
                                        <t t-elif="order.state == 'cancel'">
                                            <span class="badge badge-danger">
                                                <t t-esc="order.state"/>
                                            </span>
                                        </t>
                                        <t t-elif="order.state == 'done'">
                                            <span class="badge badge-secondary">
                                                <t t-esc="order.state"/>
                                            </span>
                                        </t>
                                        <t t-else="">
                                            <span class="badge badge-warning">
                                                <t t-esc="order.state"/>
                                            </span>
                                        </t>

                                        <div t-att-id="'invoice_ba_%s' % order.id">
                                            <t t-if="order.invoice_status=='invoiced'">
                                                <span class="badge badge-success">Invoiced</span>
                                            </t>
                                            <t t-elif="order.invoice_status=='to invoice'">
                                                <span class="badge badge-danger">To Invoice</span>
                                            </t>
                                            <t t-else="">
                                                <span class="badge badge-warning">No Invoice</span>
                                            </t>
                                        </div>

                                    </td>
                                    <td>
                                        <t t-esc="order.amount_total"/>
                                    </td>
                                    <td>
                                        <t t-if="order.state != 'cancel'">
                                        <a t-att-href="'/service/%s/order/delete' % order.id">
                                            <i class="fa fa-trash"/>
                                        </a>
                                        </t>
                                        |
                                        <a t-att-href="'/service/%s/order/send' % order.id">
                                            <i class="fa fa-paper-plane"/>
                                        </a>
                                        |
                                        <a t-attf-style="cursor: pointer;#{order.state == 'sent' and 'color:#999;' or ''}"
                                           t-attf-class="flag fa fa-flag #{not order.state == 'sent' or ''}"
                                           t-attf-data-href="/service/#{slug(order)}/order/flag">
                                            <t t-if="order.state == 'sent'">
                                                Flagged
                                            </t>
                                            <t t-if="order.state != 'sent'">
                                                Flag
                                            </t>
                                        </a>
                                        |
                                        <a t-attf-style="cursor: pointer;#{order.invoice_status=='to invoice'  or ''}"
                                           t-attf-class="check fa fa-check-square #{order.invoice_status=='to invoice' or ''}"
                                           t-attf-data-href="/service/#{slug(order)}/invoice/send">
                                            <div t-att-id="'invoice_status_%s' % order.id">
                                                <t t-if="order.invoice_status=='to invoice'">
                                                    <span style="color:green">Confirm Invoice Now</span>
                                                </t>
                                                <t t-elif="order.invoice_status=='invoiced'">
                                                    <span style="color:#999">Invoiced</span>
                                                </t>
                                                <t t-else="">
                                                    <span style="color:#999">No-Invoice  </span>
                                                </t>
                                            </div>
                                        </a>
<!--                                        <t t-if="order.state == 'sale'">-->
<!--                                            <span type="button" class="btn btn-success btn-sm mb-1">-->
<!--                                                <a t-att-href="'/service/%s/task' % order.id" style="color:white">-->
<!--                                                    Add Task Time-->
<!--                                                </a>-->
<!--                                            </span>-->
<!--                                        </t>-->
                                        |
                                        <t t-if="order.state == 'sale'">
                                        <a t-att-href="'/service/%s/task' % order.id">
                                            <i class="fa fa-calendar"/>Add Task Time
                                        </a></t>
                                    </td>
                                    <td>
                                        <div>
                                            <t t-if="order.state=='sent'">
                                                Wait for customer confirm order |
                                            </t>
                                            <t t-if="order.state=='sale' and order.invoice_status=='no'">
                                                wait for delivery time and confirm invoice |
                                            </t>
                                        </div>
                                        <div t-att-id="'prio_text_%s' % order.id">
                                            <t t-if="order.prio">
                                                Prio |
                                            </t>
                                            <t t-if="not order.prio">
                                                Normal |
                                            </t>
                                        </div>
                                        <div t-att-id="'invoice_text_%s' % order.id">
                                            <t t-if="order.invoice_status=='invoiced'">
                                                Invoiced
                                            </t>
                                            <t t-elif="order.invoice_status=='to invoice'">
                                                Confirm Invoice Now
                                            </t>
                                            <t t-else="">
                                                No-Invoice
                                            </t>
                                        </div>
                                    </td>

<!--                                    <td>-->
<!--                                        <t t-if="order.state == 'sale'">-->
<!--                                            <span type="button" class="btn btn-success btn-sm mb-1">-->
<!--                                                <a t-att-href="'/service/%s/task' % order.id" style="color:white">-->
<!--                                                    Add Task Time-->
<!--                                                </a>-->
<!--                                            </span>-->
<!--                                        </t>-->
<!--                                    </td>-->
                                </tr>
                            </t>


                        </tbody>
                    </table>
                </div>
            </t>
        </template>

        <!--Show list of orders result-->
        <template id="index_result">
            <t t-call="website.layout">
                <div class="table-wrapper">
                    <section id="tabs" class="project-tab">

                        <div class="table-title">
                            <div class="row">
                                <div class="col-sm-6">
                                    <a class="d-inline mr-1" t-att-href="'/service/all/order'"
                                       style="color:white;">
                                        <h2 class="d-inline mr-1">
                                            <i class="fa fa-home"></i>
                                            Orders
                                        </h2>
                                    </a>
                                </div>
                            </div>
                        </div>

                        <div class="">
                            <div class="">
                                <div class="col-sm-6">
                                    <nav>
                                        <div class="nav nav-tabs nav-fill" id="nav-tab" role="tablist"
                                             style="font-weight:bold;">
                                            <a class="nav-item nav-link active" id="nav-home-tab" data-toggle="tab"
                                               href="#nav-home" role="tab" aria-controls="nav-home"
                                               aria-selected="true">
                                                Order
                                                line By Hours
                                            </a>
                                            <a class="nav-item nav-link" id="nav-profile-tab" data-toggle="tab"
                                               href="#nav-profile" role="tab" aria-controls="nav-profile"
                                               aria-selected="false">
                                                Order Line By Piece
                                            </a>
                                        </div>
                                    </nav>
                                </div>
                                <div class="tab-content" id="nav-tabContent">

                                    <div class="tab-pane fade show active" id="nav-home" role="tabpanel"
                                         aria-labelledby="nav-home-tab">
                                        <!--Table for working hours -->
                                        <table class="table table-striped table-hover">
                                            <thead>
                                                <tr>
                                                    <th>#</th>
                                                    <th>Product</th>
                                                    <th>Måttenhet</th>
                                                    <th>Beställa antal</th>
                                                    <th>Unit Price</th>
                                                    <th>Price exkl. tax</th>
                                                    <th>Tax</th>
                                                    <th>Totacl Price $</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr t-foreach="order_ids_hour" t-as="hour">
                                                    <td>
                                                        <t t-esc="hour_index+1"/>
                                                    </td>
                                                    <td>
                                                        <t t-esc="hour.product_id.name"/>
                                                    </td>
                                                    <td>
                                                        <t t-esc="hour.product_uom.name"/>
                                                    </td>
                                                    <td>
                                                        <t t-esc="hour.product_uom_qty"/>
                                                    </td>
                                                    <td>
                                                        <t t-esc="hour.price_unit"/>
                                                    </td>
                                                    <td>
                                                        <t t-esc="hour.price_subtotal"/>
                                                    </td>
                                                    <td>
                                                        <t t-esc="hour.price_tax"/>
                                                    </td>
                                                    <td>
                                                        <t t-esc="hour.price_total"/>
                                                    </td>
                                                </tr>

                                                <tr>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td>Total Work Hours:</td>
                                                    <td></td>
                                                    <td>Price exkl. Tax:</td>
                                                    <td>Tax:</td>
                                                    <td>Price Total(USD):</td>
                                                </tr>
                                                <tr>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td>
                                                        <t t-esc="qty_total"/>
                                                    </td>
                                                    <td></td>
                                                    <td>
                                                        <t t-esc="price_subtotal"/>
                                                    </td>
                                                    <td>
                                                        <t t-esc="price_tax"/>
                                                    </td>
                                                    <td>
                                                        <t t-esc="price_total"/>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>

                                    <div class="tab-pane fade" id="nav-profile" role="tabpanel"
                                         aria-labelledby="nav-profile-tab">
                                        <!--Table for working hours -->
                                        <table class="table table-striped table-hover" cellspacing="0">
                                            <thead>
                                                <tr>
                                                    <th>#</th>
                                                    <th>Product</th>
                                                    <th>Måttenhet</th>
                                                    <th>Beställa antal</th>
                                                    <th>Unit Price</th>
                                                    <th>Price exkl. tax</th>
                                                    <th>Tax</th>
                                                    <th>Totacl Price $</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr t-foreach="order_ids_piece" t-as="piece">
                                                    <td>
                                                        <t t-esc="piece_index+1"/>
                                                    </td>
                                                    <td>
                                                        <t t-esc="piece.product_id.name"/>
                                                    </td>
                                                    <td>
                                                        <t t-esc="piece.product_uom.name"/>
                                                    </td>
                                                    <td>
                                                        <t t-esc="piece.product_uom_qty"/>
                                                    </td>
                                                    <td>
                                                        <t t-esc="piece.price_unit"/>
                                                    </td>
                                                    <td>
                                                        <t t-esc="piece.price_subtotal"/>
                                                    </td>
                                                    <td>
                                                        <t t-esc="piece.price_tax"/>
                                                    </td>
                                                    <td>
                                                        <t t-esc="piece.price_total"/>
                                                    </td>
                                                </tr>

                                                <tr>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td>Total Pieces:</td>
                                                    <td></td>
                                                    <td>Price exkl. Tax:</td>
                                                    <td>Tax:</td>
                                                    <td>Price Total (USD):</td>
                                                </tr>
                                                <tr>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td>
                                                        <t t-esc="pqty_total"/>
                                                    </td>
                                                    <td></td>
                                                    <td>
                                                        <t t-esc="pprice_subtotal"/>
                                                    </td>
                                                    <td>
                                                        <t t-esc="pprice_tax"/>
                                                    </td>
                                                    <td>
                                                        <t t-esc="pprice_total"/>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>

                                    </div>

                                </div>

                            </div>
                        </div>
                    </section>

                </div>
            </t>
        </template>

        <!-- Show order detail and update order-->
        <template id="view_order">
            <t t-call="website.layout">

                <div class="table-wrapper pb-5">
                    <div class="table-title">
                        <div class="row">
                            <div class="col-sm-12">
                                <a class="d-inline mr-1" t-att-href="'/service/all/order'" style="color:white;">
                                    <h2 class="d-inline mr-1">
                                        <i class="fa fa-home"></i>
                                        Orders
                                    </h2>
                                </a>
                            </div>
                        </div>
                    </div>

                    <form id="info_form" t-att-action="'/service/%s/order' % order.id" method="post"
                          class="form-horizontal mt32 mx-3" enctype="multipart/form-data" style="with:80%;margin:auto">
                        <input type="hidden" name="id" t-att-value="order.id"/>
                        <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>

                        <div class="form-group">
                            <label class="col-md-3 col-sm-4 control-label" for="orderID">Order Id</label>
                            <div class="col-md-7 col-sm-8">
                                <p class="form-control-static" name="orderID">
                                    <t t-esc="order.name"/>
                                </p>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-3 col-sm-4 control-label" for="foobar1">Customer</label>
                            <div class="col-md-7 col-sm-8">
                                <p class="form-control-static" name="foobar1">
                                    <t t-esc="order.partner_id.name"/>
                                </p>
                            </div>
                        </div>
                        <div t-att-class="'form-group %s' %validation.get('note', '')">

                            <div class="col-md-7 col-sm-8">
                                <label class="col-md-3 col-sm-4 control-label" for="note">Note</label>
                                <input type="text" class="form-control" name="note"
                                       t-att-value="order.note if order.note else order.name" placeholder="Notes..."/>
                                <small t-esc="help.get('note', '')"/>

                                <p class="font-weight-bold mt-3">Priority</p>
                                <label class="switch switch-left-right mt--3">
                                    <input class="switch-input" type="checkbox" name="prio" t-att-checked="order.prio"/>
                                    <span class="switch-label" data-on="On" data-off="Off"/>
                                    <span class="switch-handle"/>
                                </label>

                            </div>
                        </div>
                        <div class="form-group col-md-7 col-sm-8">
                            <table class="table table-striped table-hover">
                                <thead>
                                    <tr>
                                        <th>#</th>
                                        <th>Product</th>
                                        <th>Måttenhet</th>
                                        <th>Beställa antal</th>
                                        <th>Levererat antal</th>
                                        <th>Unit Price</th>
                                        <th>Price exkl. tax</th>
                                        <th>Tax</th>
                                        <th>Totacl Price</th>
                                        <!--                                        <th>Leverera Nu</th>-->
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr t-foreach="sale_order_line_ids" t-as="orderline">
                                        <td>
                                            <t t-esc="orderline_index+1"/>

                                        </td>
                                        <td>
                                            <t t-esc="orderline.product_id.name"/>
                                        </td>
                                        <td>
                                            <t t-esc="orderline.product_uom.name"/>
                                        </td>
                                        <td>
                                            <div t-att-class="'form-group %s' %validation.get('order_line', '')">
                                                <input type="text" class="form-control" name="qty"
                                                       t-att-value="orderline.product_uom_qty"
                                                       placeholder="0"/>
                                            </div>
                                        </td>
                                        <td>
                                            <div t-att-class="'form-group %s' %validation.get('order_line', '')">
                                                <input type="text" class="form-control" name="qty_delivered"
                                                       t-att-value="orderline.qty_delivered"
                                                       placeholder="0"/>
                                            </div>
                                        </td>
                                        <td>
                                            <t t-esc="orderline.price_unit"/>
                                        </td>
                                        <td>
                                            <t t-esc="orderline.price_subtotal"/>
                                        </td>
                                        <td>
                                            <t t-esc="orderline.price_tax"/>
                                        </td>
                                        <td>
                                            <t t-esc="orderline.price_total"/>
                                        </td>
                                        <!--                                        <td>-->
                                        <!--                                            <a t-att-href="'/service/%s/order/send' % order.id">-->
                                        <!--                                                Delivery now-->
                                        <!--                                            </a>-->
                                        <!--                                        </td>-->
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div class="col-md-12">
                            <div class="pull-right mb16">
                                <div class="">
                                    <button id="submit_btn" class="btn btn-primary btn-lg">Update and Save</button>
                                </div>
                            </div>
                        </div>

                        <!--Timesheet report-->
                        <div class="form-group" t-foreach="order.tasks_ids" t-as="task">
                            <label class="col-md-3 col-sm-4 control-label">Task</label>
                            <div class="col-md-7 col-sm-8">
                                <p class="form-control-static" name="taskID" t-esc="task.name">
                                </p>
                            </div>

                            <label class="col-md-3 col-sm-4 control-label">Time Rapport</label>
                            <table class="table table-striped table-hover">
                                <thead>
                                    <tr>
                                        <th>#</th>
                                        <th>Order Id</th>
                                        <th>Date</th>
                                        <th>Employee</th>
                                        <th>Work Description</th>
                                        <th>Duration(Hours)</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>
                                            <t t-esc="len(task.project_id.analytic_account_id.line_ids.filtered(lambda r: r.task_id.sale_order_id.name == order.name))+1"/>
                                        </td>
                                        <td>
                                            <t t-esc="order.name"/>
                                        </td>
                                        <td>
                                            <t t-esc="date"/>
                                        </td>
                                        <td>
                                            <t t-esc="employee"/>
                                        </td>

                                        <div t-att-class="'form-group %s' %validation.get('task_time', '')">
                                            <td>
                                                <input type="text" class="form-control" name="name"
                                                       placeholder="Description..."/>
                                            </td>
                                            <td>
                                                <input type="text" class="form-control" name="hours" placeholder="0"/>
                                            </td>
                                        </div>
                                    </tr>

                                    <tr t-foreach="task.project_id.analytic_account_id.line_ids.filtered(lambda r: r.task_id.sale_order_id.name == order.name)"
                                        t-as="t">
                                        <td>
                                            <t t-esc="t_index+1"/>
                                            <!--                                            <t t-esc="max(task.project_id.analytic_account_id.line_ids.filtered(lambda r: r.task_id.sale_order_id.name == order.name))_index-1"/>-->
                                        </td>
                                        <td>
                                            <t t-esc="t.task_id.sale_order_id.name"/>
                                        </td>
                                        <td>
                                            <t t-esc="t.date"/>
                                        </td>
                                        <td>
                                            <t t-esc="t.employee_id.name"/>
                                        </td>
                                        <td>
                                            <t t-esc="t.name"/>
                                        </td>
                                        <td>
                                            <t t-esc="t.unit_amount"/>
                                        </td>
                                    </tr>

                                </tbody>

                            </table>


                        </div>

                        <!--                    <div class="row">-->
                        <!--                        <div class="col-md-12">-->
                        <!--                            <div class="pull-right">-->
                        <!--                                <button id="submit_btn" class="btn btn-primary btn-lg">Update and Save</button>-->
                        <!--                            </div>-->
                        <!--                        </div>-->
                        <!--                    </div>-->
                    </form>
                    <!--Timesheet report end-->
                    <div class="col-md-12">
                        <div t-if="task_objs != 'null'" class="pull-right">
                            <button class="btn btn-primary btn-lg">
                                <a t-att-href="'/service/%s/task' % order.id" style="color:white">
                                    To Add Task Time Page
                                </a>
                            </button>
                        </div>
                    </div>
                    <!--                    <div class="row">-->
                    <!--                        <div class="col-md-12 pull-right">-->
                    <!--                            <a t-if="task_objs != 'null'" class="btn btn-info btn-sm"-->
                    <!--                               t-att-href="'/service/%s/task' % order.id">-->
                    <!--                                To Add Task Time Page-->
                    <!--                            </a>-->
                    <!--                        </div>-->
                    <!--                    </div>-->

                </div>
            </t>
        </template>

        <!-- Show order detail and update project-task-arbetstid-->
        <template id="view_task">
            <t t-call="website.layout">

                <div class="table-wrapper pb-5">
                    <div class="table-title">
                        <div class="row">
                            <div class="col-sm-12">
                                <a class="d-inline mr-1" t-att-href="'/service/all/order'" style="color:white;">
                                    <h2 class="d-inline mr-1">
                                        <i class="fa fa-home"></i>
                                        Orders
                                    </h2>
                                </a>
                            </div>
                        </div>
                    </div>

                    <form id="info_form" t-att-action="'/service/%s/task' % order.id" method="post"
                          class="form-horizontal mt32 mx-3" enctype="multipart/form-data" style="with:80%;margin:auto">
                        <input type="hidden" name="id" t-att-value="order.id"/>
                        <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>

                        <div class="form-group">
                            <label class="col-md-3 col-sm-4 control-label" for="orderID">Order Id</label>
                            <div class="col-md-7 col-sm-8">
                                <p class="form-control-static" name="orderID">
                                    <t t-esc="order.name"/>
                                </p>
                            </div>
                        </div>

                        <div class="form-group" t-foreach="order.tasks_ids" t-as="task">
                            <label class="col-md-3 col-sm-4 control-label" for="taskID">Task</label>
                            <div class="col-md-7 col-sm-8">
                                <p class="form-control-static" name="taskID">
                                    <t t-esc="task.name"/>
                                </p>
                            </div>


                            <label class="col-md-3 col-sm-4 control-label">Time Rapport</label>
                            <div class="form-group col-md-7 col-sm-8">
                                <table class="table table-striped table-hover">
                                    <thead>
                                        <tr>
                                            <th>#</th>
                                            <th>Order Id</th>
                                            <th>Date</th>
                                            <th>Employee</th>
                                            <th>Work Description</th>
                                            <th>Duration(Hours)</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr t-foreach="task.project_id.analytic_account_id.line_ids.filtered(lambda r: r.task_id.sale_order_id.name == order.name)"
                                            t-as="t">
                                            <td>
                                                <t t-esc="t_index+1"/>
                                            </td>
                                            <td>
                                                <t t-esc="t.task_id.sale_order_id.name"/>
                                            </td>
                                            <td>
                                                <t t-esc="t.date"/>
                                            </td>
                                            <td>
                                                <t t-esc="t.employee_id.name"/>
                                            </td>
                                            <td>
                                                <t t-esc="t.name"/>
                                            </td>
                                            <td>
                                                <t t-esc="t.unit_amount"/>
                                            </td>
                                        </tr>

                                        <tr>
                                            <td>
                                                <t t-esc="len(task.project_id.analytic_account_id.line_ids.filtered(lambda r: r.task_id.sale_order_id.name == order.name))+1"/>
                                            </td>
                                            <td>
                                                <t t-esc="order.name"/>
                                            </td>
                                            <td>
                                                <t t-esc="date"/>
                                            </td>
                                            <td>
                                                <t t-esc="employee"/>
                                            </td>

                                            <div t-att-class="'form-group %s' %validation.get('task_time', '')">
                                                <td>
                                                    <input type="text" class="form-control" name="name"
                                                           placeholder="Description..."/>

                                                </td>
                                                <td>
                                                    <input type="text" class="form-control" name="hours"
                                                           placeholder="0"/>
                                                </td>
                                            </div>
                                        </tr>

                                    </tbody>
                                </table>
                            </div>


                            <div class="col-md-12">
                                <div class="pull-right mb16">
                                    <div class="">
                                        <button id="submit_btn" class="btn btn-primary btn-lg">Save</button>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </form>
                </div>
            </t>
        </template>

        <!-- Create a new order-->
        <template id="create_order">
            <t t-call="website.layout">

                <div class="table-wrapper pb-5">
                    <div class="table-title">
                        <div class="row">
                            <div class="col-sm-12">
                                <a class="d-inline mr-1" t-att-href="'/service/all/order'" style="color:white;">
                                    <h2 class="d-inline mr-1">
                                        <i class="fa fa-home"></i>
                                        Orders
                                    </h2>
                                </a>
                            </div>
                        </div>
                    </div>

                    <form id="create_order_form" t-att-action="'/service/order/create'" method="post"
                          class="form-horizontal mt32" enctype="multipart/form-data">
                        <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>

                        <div class="form-group">
                            <label class="col-md-3 col-sm-4 control-label" for="foobar1">Create new sales order</label>
                        </div>

                        <div t-att-class="'form-group %s' %validation.get('sales_order', '')">
                            <label class="col-md-3 col-sm-4 control-label" for="partner_id">Customer:</label>
                            <div class="col-md-7 col-sm-8">
                                <select class="form-control" name="partner_id">
                                    <t t-foreach="partner_ids" t-as="p">
                                        <option t-esc="p.display_name" t-att-value="p.id"/>
                                    </t>
                                </select>
                            </div>
                            <label class="col-md-3 col-sm-4 control-label" for="sale_order_template_id">Sales order
                                template:
                            </label>
                            <div class="col-md-7 col-sm-8">
                                <select class="form-control" name="sale_order_template_id">
                                    <t t-foreach="sale_order_template_ids" t-as="t">
                                        <option t-esc="t.name" t-att-value="t.id"/>
                                    </t>
                                </select>
                            </div>
                        </div>

                        <div class="col-md-12">
                            <div class="pull-right mb16">
                                <div class="">
                                    <button id="submit_btn" class="btn btn-primary btn-lg">Create</button>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </t>
        </template>

        <!--VG UPPGIFT: Show list of order to users that unlogged in-->
        <template id="index_public">
            <ul>
                <li t-foreach="order_ids" t-as="order">
                    <t t-esc="order.id"/>
                    <t t-esc="' : ' + order.display_name"/>
                    <t t-esc="' : ' + order.partner_id.name"/>
                    <t t-esc="' : '"/>
                    <t t-esc="order.amount_total"/>
                    <t t-esc="' : ' + order.state"/>
                </li>
            </ul>
        </template>

        <!-- F4 Show list of projects-->
        <template id="index_project">
            <t t-call="website.layout">

                <div class="table-wrapper pb-5">
                    <div class="table-title">
                        <div class="row">
                            <div class="col-sm-12">
                                <a class="d-inline mr-1" t-att-href="'/service/all/project'" style="color:white;">
                                    <h2 class="d-inline mr-1">
                                        <i class="fa fa-home"></i>
                                        Projects
                                    </h2>
                                </a>
                                <a t-att-href="'/service/project/create'" class="ml-1">
                                    <h2 class="d-inline">Create New Project</h2>
                                </a>
                                <a t-att-href="'/service/all/order'" class="pull-right mt-1" style="color:white;">
                                    <p class="d-inline">Orders</p>
                                </a>
                            </div>
                        </div>
                    </div>
                    <table class="table table-striped table-hover">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Project ID</th>
                                <th>Project Name</th>
                                <th>Project Leader/Saler</th>
                                <th>Customer</th>
                                <th>Order</th>
                                <th>Tasks</th>
                                <th>Start Date</th>
                                <th>Operation</th>
                            </tr>
                        </thead>
                        <tbody>

                            <tr t-foreach="project_ids" t-as="project">
                                <td>
                                    <t t-esc="project_index+1"/>
                                </td>
                                <td>
                                    <t t-esc="project.id"/>
                                </td>
                                <td>
                                    <a t-att-href="'/service/%s/project' % project.id">
                                        <t t-esc="project.display_name"/>
                                    </a>
                                </td>
                                <td>
                                    <t t-esc="project.partner_id.name"/>
                                </td>
                                <td>
                                    <t t-esc="project.user_id.name"/>
                                </td>
                                <td>
                                    <t t-esc="project.sale_order_id.name"/>
                                </td>
                                <td>
                                    <span class="badge badge-warning">
                                        <t t-esc="project.task_count"/>
                                    </span>
                                </td>
                                <td>
                                    <t t-esc="project.date_start"/>
                                </td>

                                <td>
                                    <a t-att-href="'/service/%s/project/delete' % project.id">
                                        <i class="fa fa-trash"/>
                                    </a>
                                </td>
                            </tr>

                        </tbody>
                    </table>
                </div>
            </t>
        </template>

        <!-- update project-->
        <template id="view_project">
            <t t-call="website.layout">
                <div class="table-wrapper pb-5">
                    <div class="table-title">
                        <div class="row">
                            <div class="col-sm-12">
                                <a class="d-inline mr-1" t-att-href="'/service/all/project'" style="color:white;">
                                    <h2 class="d-inline mr-1">
                                        <i class="fa fa-home"></i>
                                        Projects
                                    </h2>
                                </a>
                            </div>
                        </div>
                    </div>

                    <form id="info_form" t-att-action="'/service/%s/project' % project.id" method="post"
                          class="form-horizontal mt32" enctype="multipart/form-data">
                        <input type="hidden" name="id" t-att-value="project.id"/>
                        <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>

                        <div t-att-class="'form-group %s' %validation.get('project_project', '')">
                            <label class="col-md-3 col-sm-4 control-label" for="project_name">Project</label>
                            <div class="col-md-7 col-sm-8">
                                <p class="form-control-static" name="project_name">
                                    <t t-esc="project.id"/>:
                                    <t t-esc="project.display_name"/>
                                </p>
                            </div>

                            <label class="col-md-3 col-sm-4 control-label" for="partner_id">Customer:
                                <span t-esc="project_partner_id.name"/>
                            </label>
                            <div class="col-md-7 col-sm-8">
                                <select class="form-control" name="partner_id">
                                    <!--                                    <option t-esc="project.partner_id.name if project.partner_id.name else ''" selected="selected"></option>-->
                                    <t t-foreach="partner_ids" t-as="partner">
                                        <option t-esc="partner.name" t-att-value="partner.id"/>
                                    </t>
                                </select>
                            </div>

                            <label class="col-md-3 col-sm-4 control-label" for="user_id">Project leader/Saler:
                                <span t-esc="project_user_id.name"/>
                            </label>
                            <div class="col-md-7 col-sm-8">
                                <select class="form-control" name="user_id">
                                    <t t-foreach="user_ids" t-as="saler">
                                        <!--                                        <option t-if="project_user_id" t-esc="project_user_id.name" t-att-value="project_user_id" selected="selected"/>-->
                                        <option t-esc="saler.name " t-att-value="saler.id"/>
                                    </t>
                                </select>
                            </div>

                            <div t-att-class="'form-group %s' %validation.get('ufile', '')">
                                <label class="col-md-3 col-sm-4 control-label" for="ufile">Upload Picture</label>
                                <div t-attf-class="form-group #{message.get('ufile') and 'has-error' or ''}">
                                    <input type="file" name="ufile" placeholder="File to upload (image)"
                                           accpt="image/*" capture="camera"/>
                                    <p class="help-block">File to upload</p>
                                </div>
                            </div>

                            <div class="col-md-12">
                                <div class="pull-right mt-2">
                                    <button id="submit_btn" class="btn btn-primary btn-lg">Save</button>
                                </div>
                            </div>

                            <label class="col-md-3 col-sm-4 control-label">Project Images:(<span
                                    t-esc="project_doc_count"></span>)
                            </label>
                            <!--                            <div class="col-md-12 col-sm-12">-->
                            <!--                                <div t-if="project_attachment_ids if project_attachment_ids else ''">-->
                            <!--                                <t t-foreach="project_attachment_ids" t-as="p_img">-->
                            <!--                                    <img name="image" t-att-src="'data:image/jpg;base64,%s' % p_img.name"-->
                            <!--                                         style="width:100px;height:100px"/>-->
                            <!--                                </t>-->
                            <!--                            </div>-->
                            <!--                            </div>-->

                        </div>
                    </form>
                </div>
            </t>
        </template>

        <!-- Create a new project-->
        <template id="create_project">
            <t t-call="website.layout">

                <div class="table-wrapper pb-5">
                    <div class="table-title ">
                        <div class="row">
                            <div class="col-sm-12">
                                <a class="d-inline mr-1" t-att-href="'/service/all/project'" style="color:white;">
                                    <h2 class="d-inline mr-1">
                                        <i class="fa fa-home"></i>
                                        Projects
                                    </h2>
                                </a>
                            </div>
                        </div>
                    </div>

                    <form id="create_project_form" t-att-action="'/service/project/create'" method="post"
                          class="form-horizontal mt32" enctype="multipart/form-data">
                        <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>


                        <div class="form-group">
                            <label class="col-md-3 col-sm-4 control-label">Create new project</label>
                        </div>

                        <div t-att-class="'form-group %s' %validation.get('project_project', '')">

                            <div class="col-md-7 col-sm-8">
                                <label class="control-label" for="project_name">Project Name</label>
                                <input type="text" class="form-control" name="project_name"
                                       placeholder="Project name..."/>
                                <small t-esc="help.get('project_name', '')"/>
                            </div>

                            <div class="col-md-7 col-sm-8">
                                <p class="font-weight-bold mt-3 control-label">Allow Timesheets</p>
                                <label class="switch switch-left-right mt--3">
                                    <input class="switch-input" type="checkbox" name="allow_timesheets"/>
                                    <span class="switch-label" data-on="On" data-off="Off"/>
                                    <span class="switch-handle"/>
                                </label>
                            </div>

                            <div class="col-md-7 col-sm-8">
                                <label class="control-label" for="partner_id">Customer:</label>
                                <div class="">
                                    <select class="form-control" name="partner_id">
                                        <t t-foreach="partner_ids" t-as="p">
                                            <option t-esc="p.display_name" t-att-value="p.id"/>
                                        </t>
                                    </select>
                                </div>
                            </div>
                        </div>


                        <div class="col-md-12">
                            <div class="pull-right mb16">
                                <div class="">
                                    <button id="submit_btn" class="btn btn-primary btn-lg">Create</button>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </t>
        </template>


    </data>
</odoo>
